/**
 * @license Highcharts JS v2.3.3 (2012-10-04)
 * Exporting module
 *
 * (c) 2010-2011 Torstein Hønsi
 *
 * License: www.highcharts.com/license
 */
// JSLint options:
/*global Highcharts, document, window, Math, setTimeout */
(function(){function N(e){var t=e.length;while(t--)typeof e[t]=="number"&&(e[t]=Math.round(e[t])-.5);return e}var e=Highcharts,t=e.Chart,n=e.addEvent,r=e.removeEvent,i=e.createElement,s=e.discardElement,o=e.css,u=e.merge,a=e.each,f=e.extend,l=Math,c=l.max,h=document,p=window,d=h.documentElement.ontouchstart!==undefined,v="M",m="L",g="div",y="hidden",b="none",w="highcharts-",E="absolute",S="px",x,T=e.getOptions();f(T.lang,{downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",exportButtonTitle:"Export to raster or vector image",printButtonTitle:"Print the chart"}),T.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF"},menuItemStyle:{padding:"0 5px",background:b,color:"#303030",fontSize:d?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{align:"right",backgroundColor:{linearGradient:[0,0,0,20],stops:[[.4,"#F7F7F7"],[.6,"#E3E3E3"]]},borderColor:"#B0B0B0",borderRadius:3,borderWidth:1,height:20,hoverBorderColor:"#909090",hoverSymbolFill:"#81A7CF",hoverSymbolStroke:"#4572A5",symbolFill:"#E0E0E0",symbolStroke:"#A0A0A0",symbolX:11.5,symbolY:10.5,verticalAlign:"top",width:24,y:10}},T.exporting={type:"image/png",url:"http://export.highcharts.com/",width:800,buttons:{exportButton:{symbol:"exportIcon",x:-10,symbolFill:"#A8BF77",hoverSymbolFill:"#768F3E",_id:"exportButton",_titleKey:"exportButtonTitle",menuItems:[{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]},printButton:{symbol:"printIcon",x:-36,symbolFill:"#B5C9DF",hoverSymbolFill:"#779ABF",_id:"printButton",_titleKey:"printButtonTitle",onclick:function(){this.print()}}}},f(t.prototype,{getSVG:function(e){var t=this,n,r,o,l,c=u(t.options,e);return h.createElementNS||(h.createElementNS=function(e,t){return h.createElement(t)}),r=i(g,null,{position:E,top:"-9999em",width:t.chartWidth+S,height:t.chartHeight+S},h.body),f(c.chart,{renderTo:r,forExport:!0}),c.exporting.enabled=!1,c.chart.plotBackgroundImage=null,c.series=[],a(t.series,function(e){l=u(e.options,{animation:!1,showCheckbox:!1,visible:e.visible}),l.isInternal||(l&&l.marker&&/^url\(/.test(l.marker.symbol)&&(l.marker.symbol="circle"),c.series.push(l))}),n=new Highcharts.Chart(c),a(["xAxis","yAxis"],function(e){a(t[e],function(t,r){var i=n[e][r],s=t.getExtremes(),o=s.userMin,u=s.userMax;(o!==x||u!==x)&&i.setExtremes(o,u,!0,!1)})}),o=n.container.innerHTML,c=null,n.destroy(),s(r),o=o.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/isTracker="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/&nbsp;/g," ").replace(/&shy;/g,"­").replace(/<IMG /g,"<image ").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" ]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(e){return e.toLowerCase()}),o=o.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'"),o.match(/ xmlns="/g).length===2&&(o=o.replace(/xmlns="[^"]+"/,"")),o},exportChart:function(e,t){var n,r=this,o=r.getSVG(u(r.options.exporting.chartOptions,t));e=u(r.options.exporting,e),n=i("form",{method:"post",action:e.url,enctype:"multipart/form-data"},{display:b},h.body),a(["filename","type","width","svg"],function(t){i("input",{type:y,name:t,value:{filename:e.filename||"chart",type:e.type,width:e.width,svg:o}[t]},null,n)}),n.submit(),s(n)},print:function(){var e=this,t=e.container,n=[],r=t.parentNode,i=h.body,s=i.childNodes;if(e.isPrinting)return;e.isPrinting=!0,a(s,function(e,t){e.nodeType===1&&(n[t]=e.style.display,e.style.display=b)}),i.appendChild(t),p.print(),setTimeout(function(){r.appendChild(t),a(s,function(e,t){e.nodeType===1&&(e.style.display=n[t])}),e.isPrinting=!1},1e3)},contextMenu:function(e,t,r,s,u,l){var h=this,p=h.options.navigation,v=p.menuItemStyle,m=h.chartWidth,y=h.chartHeight,x="cache-"+e,T=h[x],N=c(u,l),C="3px 3px 10px #888",k,L,A;T||(h[x]=T=i(g,{className:w+e},{position:E,zIndex:1e3,padding:N+S},h.container),k=i(g,null,f({MozBoxShadow:C,WebkitBoxShadow:C,boxShadow:C},p.menuStyle),T),L=function(){o(T,{display:b})},n(T,"mouseleave",L),a(t,function(e){if(e){var t=i(g,{onmouseover:function(){o(this,p.menuItemHoverStyle)},onmouseout:function(){o(this,v)},innerHTML:e.text||h.options.lang[e.textKey]},f({cursor:"pointer"},v),k);t[d?"ontouchstart":"onclick"]=function(){L(),e.onclick.apply(h,arguments)},h.exportDivElements.push(t)}}),h.exportDivElements.push(k,T),h.exportMenuWidth=T.offsetWidth,h.exportMenuHeight=T.offsetHeight),A={display:"block"},r+h.exportMenuWidth>m?A.right=m-r-u-N+S:A.left=r-N+S,s+l+h.exportMenuHeight>y?A.bottom=y-s-N+S:A.top=s+l-N+S,o(T,A)},addButton:function(e){function g(){c.attr(v),l.attr(d)}var t=this,n=t.renderer,r=u(t.options.navigation.buttonOptions,e),i=r.onclick,s=r.menuItems,o=r.width,a=r.height,l,c,h,p=r.borderWidth,d={stroke:r.borderColor},v={stroke:r.symbolStroke,fill:r.symbolFill},m=r.symbolSize||12;t.exportDivElements||(t.exportDivElements=[],t.exportSVGElements=[]);if(r.enabled===!1)return;l=n.rect(0,0,o,a,r.borderRadius,p).align(r,!0).attr(f({fill:r.backgroundColor,"stroke-width":p,zIndex:19},d)).add(),h=n.rect(0,0,o,a,0).align(r).attr({id:r._id,fill:"rgba(255, 255, 255, 0.001)",title:t.options.lang[r._titleKey],zIndex:21}).css({cursor:"pointer"}).on("mouseover",function(){c.attr({stroke:r.hoverSymbolStroke,fill:r.hoverSymbolFill}),l.attr({stroke:r.hoverBorderColor})}).on("mouseout",g).on("click",g).add(),s&&(i=function(){g();var e=h.getBBox();t.contextMenu("export-menu",s,e.x,e.y,o,a)}),h.on("click",function(){i.apply(t,arguments)}),c=n.symbol(r.symbol,r.symbolX-m/2,r.symbolY-m/2,m,m).align(r,!0).attr(f(v,{"stroke-width":r.symbolStrokeWidth||1,zIndex:20})).add(),t.exportSVGElements.push(l,h,c)},destroyExport:function(){var e,t=this,n;for(e=0;e<t.exportSVGElements.length;e++)n=t.exportSVGElements[e],n.onclick=n.ontouchstart=null,t.exportSVGElements[e]=n.destroy();for(e=0;e<t.exportDivElements.length;e++)n=t.exportDivElements[e],r(n,"mouseleave"),t.exportDivElements[e]=n.onmouseout=n.onmouseover=n.ontouchstart=n.onclick=null,s(n)}}),e.Renderer.prototype.symbols.exportIcon=function(e,t,n,r){return N([v,e,t+n,m,e+n,t+r,e+n,t+r*.8,e,t+r*.8,"Z",v,e+n*.5,t+r*.8,m,e+n*.8,t+r*.4,e+n*.4,t+r*.4,e+n*.4,t,e+n*.6,t,e+n*.6,t+r*.4,e+n*.2,t+r*.4,"Z"])},e.Renderer.prototype.symbols.printIcon=function(e,t,n,r){return N([v,e,t+r*.7,m,e+n,t+r*.7,e+n,t+r*.4,e,t+r*.4,"Z",v,e+n*.2,t+r*.4,m,e+n*.2,t,e+n*.8,t,e+n*.8,t+r*.4,"Z",v,e+n*.2,t+r*.7,m,e,t+r,e+n,t+r,e+n*.8,t+r*.7,"Z"])},t.prototype.callbacks.push(function(e){var t,r=e.options.exporting,i=r.buttons;if(r.enabled!==!1){for(t in i)e.addButton(i[t]);n(e,"destroy",e.destroyExport)}})})();