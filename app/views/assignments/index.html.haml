// TODO these need to show in the order of the assignment_type.order_placement (set as default scope)
- @assignments.group_by(&:assignment_type).each do |assignment_type, assignments|
  %span.assignmentTypeTitle= "#{assignment_type.try(:name)}"
  %span.assignmentTypeValue= "#{assignment_type.try(:weight)}"
  %table.table.table-bordered
    %thead
    %tr
      %th ID
      %th Title
      %th Due Date
      %th Grade Type
      %th Total Points
      - if current_user.is_staff?
        %th Average
        %th High Score
        %th Low Score
        %th # Submitted
        %th
        %th
        %th
        %th
        %th
      %tbody
        - assignments.each do |assignment|
          - if current_user.is_staff?
            %tr
              %td= assignment.id
              %td= assignment.title
              %td
                - if assignment.due_date?
                  = assignment.due_date
              %td
                - if assignment.has_groups?
                  = link_to 'Create Group', new_group_path("assignment_id"=>assignment.id)
                - else 
                  = #{assignment.grade_scope}
                - if assignment.has_teams? && current_user.is_student?
                  = link_to 'My Team', team_path("team_id" => current_user.team_id)
              %td= number_with_delimiter(assignment.point_total, :delimiter => ',') 
              %td= number_with_delimiter(assignment.average, :delimiter => ',') 
              %td= number_with_delimiter(assignment.high_score, :delimiter => ',') 
              %td= number_with_delimiter(assignment.low_score, :delimiter => ',')
              %td= assignment.assignment_grades_attempted
              %td= link_to 'View', assignment
              %td= link_to 'Grade', new_assignment_grade_path("assignment_id"=>assignment.id)
              - if assignment.mass_gradeable?
                %td= link_to 'Log Grades',  mass_edit_assignment_grades_path("assignment_id"=>assignment.id)
              %td= link_to 'Edit', edit_assignment_path(assignment)
              %td= link_to 'Delete', assignment_path(assignment), :confirm => 'Are you sure?', :method => :delete

          - if current_user.is_student? && assignment.is_visible?
            %tr
              %td= assignment.id
              %td= assignment.title
              %td
                - if assignment.due_date?
                  = assignment.due_date
              %td
                - if assignment.has_groups?
                  = link_to 'Create Group', new_group_path("assignment_id"=>assignment.id)
                - else 
                  = #{assignment.grade_scope}
                - if assignment.has_teams? && current_user.is_student?
                  = link_to 'My Team', team_path("team_id" => current_user.team_id)
                

%div#footerNav
  - if current_user.is_staff?
    = link_to 'New Assignment', new_assignment_path, {:class => 'btn btn-primary'}