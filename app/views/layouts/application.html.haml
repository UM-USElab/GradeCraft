!!! 5
%html(lang="en")
  %head
    %meta(charset="utf-8")
    %meta(name="viewport" content="width=device-width, initial-scale=1")
    %title= content_for?(:title) ? yield(:title) : (current_course.try(:name) || 'GradeCraft')
    = csrf_meta_tags
    /[if lt IE 9]
      = javascript_include_tag "https://html5shim.googlecode.com/svn/trunk/html5.js"
    = stylesheet_link_tag "application", :media => "all"
    = javascript_include_tag 'application'
    = yield(:head)
  %body
    .navbar.navbar-fixed-top.navbar-inverse
      .navbar-inner
        .container
          %a.brand(href="/dashboard")
            - if current_course
              #{current_course.name}
            - else
              GradeCraft
          %div.pull-right
            - if current_user && current_course
              %div{:class => 'btn-group pull-left'}
                - if current_user.is_admin? 
                  = link_to "Course Dashboard",  dashboard_path, :class => "btn"
                - elsif current_user.is_staff?
                  = link_to "My Dashboard",  dashboard_path, :class => "btn"   
                  = link_to "Assignments", assignments_path, :class => "btn"
                  - if current_course.has_teams?
                    = link_to "#{current_course.team_ref}s", teams_path, :class => "btn"
                  - if current_course.has_badges?                
                    = link_to "Badges", badges_path, :class => "btn"
                  - if current_course.shared_badges?
                    = link_to "Class Badges", students_users_path, :class => "btn"
            - if current_user
              %div{:class => 'btn-group pull-right'}
                %a{:class => 'btn dropdown-toggle', "data-toggle" => 'dropdown', :href => '#' }
                  = current_user.public_name
                  %i.caret
                %ul{:class => 'dropdown-menu well'}
                  %li= link_to "My Account", edit_profile_users_path
                  %li= link_to "Logout", :logout
            - else
              %div{:class => 'btn-group pull-right'}
                %a{:class => 'btn btn-primary dropdown-toggle', "data-toggle" => 'dropdown', :href => '#' }
                  Log in
                  %span{:class => 'caret'}
                %ul{:class => 'dropdown dropdown-menu well'}
                  = simple_form_for User.new, :url => user_sessions_path do |f|
                    = f.input :email, :label => false
                    = f.input :password, :label => false
                    %span.control-label.fadeopacity= "Remember Me"
                    %span#rememberMe= f.input :remember_me, :as => :boolean, :label => false
                    = submit_tag "Log in", :class => 'btn btn-primary btn-small pull-right'
                    = button_to 'Forget your password?', new_user_session_path, :class => "btn btn-info btn-small"

    .container-fluid.container
      %div.row-fluid.span12
        = render 'layouts/content'
      
      %div.row-fluid.span12#footer
        %hr      
          %div.pull-right
            &copy; 2012 Regents of the University of Michigan &#124;
            = link_to "Using Gradecraft", using_gradecraft_path
            | 
            = link_to "Site Credits", credits_path
        
    .navbar.navbar-fixed-bottom.navbar-inverse
      .navbar-inner
        - if current_user.try(:is_admin?)
          %div{:class => 'btn-group pull-left'}
            = form_tag change_current_course_path do
              = select_tag 'course_id', options_from_collection_for_select(current_user.courses, 'id', 'name', current_course.id)
        